<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.2.242">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="dcterms.date" content="2021-05-25">
<meta name="description" content="Lessons I’ve learned from my own experience by working with various nonprofit organizations such as DataKind and Texas Justice Initiative">

<title>Hongsup Shin - Tech volunteering tips for nonprofits</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1.6em;
  vertical-align: middle;
}
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script>


<link rel="stylesheet" href="../../styles.css">
</head>

<body class="nav-fixed fullcontent">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">Hongsup Shin</span>
    </a>
  </div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../about.html">
 <span class="menu-text">About</span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/hongsupshin"><i class="bi bi-github" role="img">
</i> 
 <span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://twitter.com/hongsupshin"><i class="bi bi-twitter" role="img">
</i> 
 <span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://www.linkedin.com/in/hongsupshin/"><i class="bi bi-linkedin" role="img">
</i> 
 <span class="menu-text"></span></a>
  </li>  
</ul>
              <div id="quarto-search" class="" title="Search"></div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<header id="title-block-header" class="quarto-title-block default page-columns page-full">
  <div class="quarto-title-banner page-columns page-full">
    <div class="quarto-title column-body">
      <h1 class="title">Tech volunteering tips for nonprofits</h1>
                  <div>
        <div class="description">
          Lessons I’ve learned from my own experience by working with various nonprofit organizations such as DataKind and Texas Justice Initiative
        </div>
      </div>
                          <div class="quarto-categories">
                <div class="quarto-category">volunteering</div>
                <div class="quarto-category">journalism</div>
                <div class="quarto-category">ML</div>
              </div>
                  </div>
  </div>
    
  
  <div class="quarto-title-meta">

      
      <div>
      <div class="quarto-title-meta-heading">Published</div>
      <div class="quarto-title-meta-contents">
        <p class="date">May 25, 2021</p>
      </div>
    </div>
    
      
    </div>
    
  
  </header><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    
<!-- main -->
<main class="content quarto-banner-title-block" id="quarto-document-content">




<div class="quarto-video ratio ratio-16x9"><iframe src="https://www.youtube.com/embed/gfqKaplRTsk" title="" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe></div>
<section id="general-advice" class="level2">
<h2 class="anchored" data-anchor-id="general-advice">General advice</h2>
<p>Before delving into specific tech-skill tips, let’s talk about more general aspects of tech volunteering.</p>
<section id="local-than-national-or-international" class="level3">
<h3 class="anchored" data-anchor-id="local-than-national-or-international">Local than national or international</h3>
<p>The first thing you’ll have to do is to choose a nonprofit. If you’ve been interested in data science for social good, you are already familiar with an organization such as <a href="https://www.datakind.org/">DataKind</a>. I’ve worked with DataKind a couple of times for small projects and normally you go through a detailed application process to become a volunteer. Since it’s a popular international organization, the application process is competitive and it’s possible that you will get rejected, which also happened to me several time.</p>
<p>Famous organizations are all good but I’d like to suggest you look around and go for <strong>local nonprofits</strong>. They often lack resources to afford tech workers which means that you can easily work with them and your work will make a bigger impact. I’ve joined <a href="https://texasjusticeinitiative.org/">Texas Justice Initiative (TJI)</a> through a local nonprofit <a href="https://www.open-austin.org/">Open Austin</a>, a Code for America Brigade which advocates for open government and civic technology. I went to their meetup a couple of times and joined their Slack channel, where I met our TJI director, Eva.</p>
</section>
<section id="long-term-than-short-term" class="level3">
<h3 class="anchored" data-anchor-id="long-term-than-short-term">Long-term than short-term</h3>
<p>Depending on the situation, you may work on one-off type projects or more long-term ones. After working with TJI for over a year, I am learning that I get to work on <strong>more diverse and in-depth projects</strong> since I’ve been here more than a year. For instance, now that I have better understanding of backend, I am paying more attention to automating many backend processes. Plus, with newly accumulated data, I also get to update data journalism reports and launch new investigation.</p>
</section>
<section id="do-your-homework" class="level3">
<h3 class="anchored" data-anchor-id="do-your-homework">Do your homework</h3>
<p>If you’re a first-timer and your nonprofit-of-interest doesn’t have any existing volunteers, you might feel intimidated. Then find an organization that already has tech volunteers. When I was reading about TJI before I joined, I found that there are a dozen tech volunteers already, which gave me a sense of reassurance. Most nonprofits disclose <strong>funding sources and board members</strong> information on their websites. This will give you a better idea on whether your values and what they represent are aligned.</p>
</section>
<section id="reasonable-expectations" class="level3">
<h3 class="anchored" data-anchor-id="reasonable-expectations">Reasonable expectations</h3>
<p>Nonprofits can be like any other workplaces; there will be some you enjoy working with and some you don’t, and there will be times when things are going really well or falling apart. Thus, having realistic and healthy expectations is important.</p>
</section>
</section>
<section id="ml-and-statistical-inference" class="level2">
<h2 class="anchored" data-anchor-id="ml-and-statistical-inference">1. ML and statistical inference</h2>
<p>Now let’s talk about specific tech-skill opportunities. Let’s start with ML and statistical inference first.</p>
<section id="predictive-modeling" class="level3">
<h3 class="anchored" data-anchor-id="predictive-modeling">Predictive modeling</h3>
<p>For my police shooting report, <strong>I purposefully did not use any ML models</strong> because I am aware of how ML tools can generate unintended harm easily when used prematurely (or at all). Whenever I talk to ML practitioners, they often love to devour any datasets and create predictive models. This is extremely dangerous.</p>
<p>Let’s assume that for whatever reason, we decided to build a predictive model by using the police shooting data. One can potentially use the <code>severity</code> column (whether a person was killed or injured during an incident) as a target and use the rest of the data as predictor variables. Given that most of our data has demographic and location information, <strong>this can easily become a bias-reproducing machine.</strong></p>
<p>Besides, if these models are deployed in public, it’s possible that <strong>the models can be used by bad actors to exploit community members who are already suffering</strong> from these tragic incidents. For instance, insurance companies might be able to use a model like this and predict how likely people of certain demographics are more likely to be killed by police. Then they can increase health insurance premium for these people.</p>
<p>Before even starting a project, I strongly recommend <strong>considering and evaluating the risk and ethical concerns first</strong>. If the risk is too high, then you shouldn’t build a model. Note that this thoughtful examination <strong>requires a diverse set of opinions</strong>. Thus, please open the discussion to other members in the organization (and even further) and try to thoroughly examine the risk.</p>
</section>
<section id="on-significance-testing" class="level3">
<h3 class="anchored" data-anchor-id="on-significance-testing">On significance testing</h3>
<p>Some data scientists like computing <em>p</em>-values from their analyses but first and foremost, <strong><em>p</em>-values have many issues</strong> (see <a href="https://www.amstat.org/asa/files/pdfs/P-ValueStatement.pdf">the official statement from American Statistical Association</a> cautioning the use of <em>p</em>-values). Plus, given that they are usually not the domain experts, it is likely that the hypotheses are not well thought out. Moreover, once you make value statements based on thresholding by using <em>p</em>-values, it is very likely that <strong>you will contribute to propagation of misinformation</strong> because these statements (e.g., “A is significantly different from baseline”) can be easily cherry-picked and propagated.</p>
</section>
<section id="then-what-can-i-do" class="level3">
<h3 class="anchored" data-anchor-id="then-what-can-i-do">Then what can I do?</h3>
<p>I am not telling you to drop any statistical inference or ML completely. Rather, I am asking you to <strong>recognize the responsibility that comes with using ML techniques</strong>. In fact, there are many research papers that use ML in clever ways. For instance, in Gonen and Goldberg’s 2019 paper, <a href="https://arxiv.org/abs/1903.03862">Lipstick on a Pig: Debiasing Methods Cover up Systematic Gender Biases in Word Embeddings But do not Remove Them</a>, the authors used predictive modeling to show that (gender) de-biased word embeddings still contain information about gender, which proves that the de-biasing technique doesn’t work. In short, we need to <strong>be more thoughtful and creative</strong> when it comes to ML.</p>
</section>
</section>
<section id="data-governance" class="level2">
<h2 class="anchored" data-anchor-id="data-governance">2. Data governance</h2>
<p>If ML requires more cautious approach, an easier project you can tackle as a data person is to help a nonprofit establish a good data governance practice. Data governance is a practice of <strong>documenting what the data contains and how it should be used</strong>. It’s a great opportunity to learn about data and help the nonprofit utilize the datasets responsibly.</p>
<p>There is an excellent paper, <strong><a href="https://www.fatml.org/media/documents/datasheets_for_datasets.pdf">Datasheets for Datasets (Gebru et al., 2018)</a></strong> that can guide you through this process. The paper has an exhaustive list of questions that you can answer to understand a dataset and its potential problems and impact. At TJI, I’ve gone through this process and published <a href="https://github.com/texas-justice-initiative/data-processing/blob/hs-datasheet/datasheet/datasheet_DIC_composition.md">a Datasheet on TJI’s custodial death dataset</a> focusing on the dataset’s composition. This was a great exercise for all of us because we were able to discuss some potential caveats such as sampling bias of our dataset. Another template you can follow is <a href="https://gdpr.eu/data-protection-impact-assessment-template/">Data Protection Impact Assessment</a> from European Union’s General Data Protection Regulation (GDPR). This also asks you to answer questions to understand the impact and ethical concerns that come with the data.</p>
<p>Finally, once you’ve created data governance documentation, make sure you provide it to users when they consume the dataset so that they are also aware of the information. This creates a chain of responsibility.</p>
</section>
<section id="data-journalism" class="level2">
<h2 class="anchored" data-anchor-id="data-journalism">3. Data journalism</h2>
<section id="interactive-dashboards-need-a-context" class="level3">
<h3 class="anchored" data-anchor-id="interactive-dashboards-need-a-context">Interactive dashboards need a context</h3>
<p>Interactive dashboards are useful in that audience can play with the data directly. However, it’s likely that <strong>you can’t have comprehensive knowledge on what users might see</strong> when they start slicing the data in every possible way. Plus, you still need <strong>context</strong> to provide a narrative. Personally, I <strong>prefer data journalism reports with static images</strong> because I can control what audience can see and I can minimize the chance of them misunderstanding the data.</p>
</section>
<section id="find-a-reference-point" class="level3">
<h3 class="anchored" data-anchor-id="find-a-reference-point">Find a reference point</h3>
<p>Providing a context is extremely important. If I don’t know where something stands compared with others, how would I know whether it is better or worse? Luckily, this comparison can be easily done by <strong>comparing your data with other reference datasets</strong>. In Part 1, I’ve used the US census data and public health data for this. You can see this approach all the time in data journalism reports from major news organizations such as <a href="https://www.nytimes.com/interactive/2020/04/23/upshot/five-ways-to-monitor-coronavirus-outbreak-us.html">New York Times</a>. Comparing your data with a reference data helps you ask more interesting questions to understand the difference.</p>
</section>
<section id="get-a-domain-expert-review" class="level3">
<h3 class="anchored" data-anchor-id="get-a-domain-expert-review">Get a domain expert review</h3>
<p>It’s likely that tech workers are not the domain experts. In this case, make sure your work is seen by them before you publish. You can start by sharing your work with other members in the nonprofit. You can also <strong>reach out to academics</strong> who are most likely very interested in this type of work. For my report, Eva helped me reach out to Howard Henderson of Texas Southern University’s Barbara Jordan-Mickey Leland School of Public Affairs and Center for Justice Research, and Kevin Buckler of University of Houston-Downtown’s Department of Criminal Justice for a review.</p>
</section>
<section id="leave-out-any-questionable-information" class="level3">
<h3 class="anchored" data-anchor-id="leave-out-any-questionable-information">Leave out any questionable information</h3>
<p>You might want to use everything that’s in a dataset to write a report. This is not necessarily the best idea, unfortunately. In our police shooting dataset, there is a column called <code>deadly_weapon</code> which shows whether the person shot by police possessed a <em>deadly</em> weapon. It turns out that <strong>this information is highly contentious</strong> because whether an object is perceived as <em>deadly</em> varies widely. Based on studies and news reports, a BB gun, a butter knife, or a candlestick can be perceived as a deadly weapon. After deliberation, we’ve decided not to use this information because we thought this categorization misrepresents true information. We plan to revisit this after collecting information about actual objects used in the incidents.</p>
</section>
<section id="research-opportunities" class="level3">
<h3 class="anchored" data-anchor-id="research-opportunities">Research opportunities</h3>
<p><strong>Datasets gathered by local nonprofits are so specific and unique</strong> that they provide interesting research opportunities, which becomes great material for a data journalism report. Currently at TJI, several volunteers and I have been working on identifying systematic pattern in interaction between officers and civilians in police shooting incidents. <a href="https://www.linkedin.com/in/jiletta-kubena-phd-21849812a/">Jiletta Kubena</a>, a criminologist and a TJI volunteer, has been studying survey results on various populations, such as people in custody, of those who’ve been impacted by COVID-19.</p>
</section>
<section id="tech-setup" class="level3">
<h3 class="anchored" data-anchor-id="tech-setup">Tech setup</h3>
<p>You will be creating same types of plots over and over with small changes depending on how your investigation goes. Thus, it’s better to <strong>spend time in the beginning to create modules for plotting</strong>. At the same time, ask if your nonprofit already has a specific visual style guide that you can follow. This helps visual consistency.</p>
</section>
</section>
<section id="sustainable-workflow" class="level2">
<h2 class="anchored" data-anchor-id="sustainable-workflow">4. Sustainable workflow</h2>
<p>What kind of tech tools and workflow gets to be implemented in a nonprofit heavily depends on their volunteers. However, the <strong>volunteer-dependent workflow is quite fragile</strong> because volunteers in general have weaker commitment because they are not always readily available. Thus, it’s quite important to help a nonprofit build a sustainable workflow.</p>
<p><strong>Implementing CI/CD flow</strong> is a must and you can even reuse your notebooks to create analytics reports with updated data by using a package such as <a href="https://papermill.readthedocs.io/en/latest/">Papermill</a>. If you have a heterogenous dataset, you can utilize scikit-learn’s <a href="https://scikit-learn.org/stable/modules/generated/sklearn.compose.ColumnTransformer.html"><code>ColumnTransformer</code></a> to build a consistent and robust data preprocessing pipeline. Finally, you can also set up a data validation check by using a tool like <a href="https://pandera.readthedocs.io/en/stable/">Pandera</a>. This will help you monitor and flag any unexpected data drift.</p>
<p>A sustainable workflow is also more than just the tech side. Recently, at TJI, we’ve implemented a <strong>formal review process</strong> to improve the quality of our work. We used to review manuscripts on Google Docs but now we review them on GitHub as a <strong>pull request</strong>. <a href="https://www.linkedin.com/in/nickholden/">Nick Holden</a>, a software engineer and a TJI volunteer, connected our content management system (CMS) to this process so that people who are not familiar with GitHub can easily create a manuscript. Writing a plain text document on the CMS automatically creates a pull request and other members at TJI can review and exchange feedback transparently.</p>
</section>
<section id="community-building" class="level2">
<h2 class="anchored" data-anchor-id="community-building">5. Community building</h2>
<p>As a volunteer, you can always work by yourself on a one-off project. Even if that’s the case, having a sense of community makes your work more enjoyable and prevents fast volunteer turnover. In this sense, community building is quite important.</p>
<p>Community building can be socializing but it’s also about building robust infrastructure because it reduces unnecessary stress. Given that <strong>volunteer-dependent workflow is fragile, and robustness, accountability, and transparency matter even more.</strong> As a tech worker, you can help nonprofits adopt good practices from tech workflow such as automation, code review, software engineering practices, and so on. But when bringing a new tech tool, please try to <strong>use open source software</strong> as much as possible. I’ve seen a case where a tech worker brought their company’s product and left, which made the nonprofit’s entire backend hugely dependent on a niche commercial product. Sometimes nonprofits are approached by private partners. With your corporate experience, you can help the nonprofit protect their asset too.</p>
<p>Implementing <strong>a good practice for collaboration</strong> is equally important. You can start by encouraging other volunteers to showcase and highlight their work. I’ve suggested a dedicated <strong>blog where all volunteers can write about their work in their own words</strong>. This accelerates knowledge transfer within the organization and helps other nonprofits too.</p>
<p>Finally, I want to emphasize that you should <strong>watch out for volunteer burnout</strong>. It happened to me multiple times unfortunately. I got super excited and passionate about a subject matter and I ended up with exhausting all my energy in a short period of time. So please pace yourself and take breaks if needed. But when you do so, instead of ghosting please tell others so that they have reasonable expectations while you’re gone.</p>
</section>
<section id="my-personal-experience" class="level2">
<h2 class="anchored" data-anchor-id="my-personal-experience">My personal experience</h2>
<p>Some may think volunteering would be using your existing skills without learning. That was never the case for me. It’s been amazing to have <strong>opportunities to work with different types of data</strong> that I don’t get to see at work. I’ve also got to work on various projects from exercising data assessment practice and writing data journalism reports, to creating custom data visualization modules and transferring ML Ops practices to the existing workflow. I’m looking forward to exploring research opportunities with causal modeling and explainable AI with our dataset in the future.</p>
<p>But more importantly, I’ve been lucky to work with our director Eva and all the volunteers who have been kind, cordial, and open to new ideas. It was also fantastic to <strong>work with people from different disciplines</strong> and to learn from these domain experts. This helped me expand my network and meet other nonprofit organizers, academics, and tech workers. Finally, I’ve <strong>learned a lot about local social issues surrounding my neighborhood and my city</strong>, which have significant impact on our community members. I am looking forward to many other interesting opportunities in TJI.</p>
<p>I hope these tips help you start exploring volunteering opportunities. Finally, you are more helpful than you think! So don’t worry about whether you have the right skill sets or not. They will appreciate your knowledge and there will be many things you can contribute to. So if you find any interesting organizations, don’t be afraid to reach out. You will help other people and learn a lot in the process. Good luck!</p>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>